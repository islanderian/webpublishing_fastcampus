<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./index.css" />
    <title>Fast Bank</title>
  </head>
  <body>
    <div id="main-image-wrapper">
      <img
        src="./imgs/Lovepik_com-401339128-data-management-data-analysis-icon-free-vector-illustration-mate.png"
        alt=""
        width="320"
      />
    </div>
    <div id="intro-main">
      <p>이미 모두의 은행, 패스트뱅크</p>
      <p>함께 일해요.</p>
      <p id="join-us-text">Join Us!</p>
      <img id="down-arrow-icon" src="./imgs/down-arrow.png" alt="" />
    </div>
    <ul id="list-item-wrapper">
      <li class="list-item">26주 적금</li>
      <li class="list-item">저금</li>
      <li class="list-item">패스트캠퍼스</li>
      <li class="list-item">떡볶이</li>
      <li class="list-item">치킨</li>
      <li class="list-item">축구</li>
      <li class="list-item">저금</li>
      <li class="list-item">패스트캠퍼스</li>
      <li class="list-item">떡볶이</li>
      <li class="list-item">치킨</li>
      <li class="list-item">야구</li>
      <li class="list-item">저금</li>
      <li class="list-item">패스트캠퍼스</li>
      <li class="list-item">떡볶이</li>
      <li class="list-item">치킨</li>
      <li class="list-item">토스</li>
      <li class="list-item">26주 적금</li>
      <li class="list-item">저금</li>
      <li class="list-item">패스트캠퍼스</li>
      <li class="list-item">떡볶이</li>
      <li class="list-item">치킨</li>
      <li class="list-item">26주 적금</li>
      <li class="list-item">저금</li>
      <li class="list-item">패스트캠퍼스</li>
      <li class="list-item">떡볶이</li>
      <li class="list-item">치킨</li>
      <li class="list-item">26주 적금</li>
      <li class="list-item">저금</li>
      <li class="list-item">패스트캠퍼스</li>
      <li class="list-item">떡볶이</li>
      <li class="list-item">치킨</li>
      <li class="list-item">저금</li>
      <li class="list-item">패스트캠퍼스</li>
      <li class="list-item">떡볶이</li>
      <li class="list-item">치킨</li>
      <li class="list-item">토스</li>
      <li class="list-item">26주 적금</li>
      <li class="list-item">저금</li>
      <li class="list-item">패스트캠퍼스</li>
      <li class="list-item">떡볶이</li>
      <li class="list-item">치킨</li>
      <li class="list-item">26주 적금</li>
      <li class="list-item">저금</li>
      <li class="list-item">패스트캠퍼스</li>
      <li class="list-item">떡볶이</li>
      <li class="list-item">치킨</li>
      <li class="list-item">26주 적금</li>
      <li class="list-item">저금</li>
      <li class="list-item">패스트캠퍼스</li>
      <li class="list-item">떡볶이</li>
      <li class="list-item">치킨</li>
      <li class="list-item">토스</li>
      <li class="list-item">26주 적금</li>
      <li class="list-item">저금</li>
      <li class="list-item">패스트캠퍼스</li>
      <li class="list-item">떡볶이</li>
      <li class="list-item">치킨</li>
      <li class="list-item">26주 적금</li>
      <li class="list-item">저금</li>
      <li class="list-item">패스트캠퍼스</li>
      <li class="list-item">떡볶이</li>
      <li class="list-item">치킨</li>
      <li class="list-item">26주 적금</li>
    </ul>
    <main>
      <section id="panel1-img">
        <img id="flying-santa-image" src="./imgs/santa_flying.png" alt="" />
      </section>
      <div id="white-wrapper">
        <div id="slider-container">
          <div id="slider-content-wrapper">
            <div id="slider-content">
              <img
                class="slider-image"
                src="https://picsum.photos/id/1/600/933"
                alt=""
              />
              <img
                class="slider-image"
                src="https://picsum.photos/id/59/600/933"
                alt=""
              />
              <img
                class="slider-image"
                src="https://picsum.photos/id/89/600/933"
                alt=""
              />
            </div>
          </div>
          <div class="slider-button" id="left-button">&lt;</div>
          <div class="slider-button" id="right-button">&gt;</div>
          <div id="slider-index">1/3</div>
        </div>
      </div>
    </main>
  </body>
  <script>
    // 스크롤에 따라 리스트 색상 변화
    const listStyleChangeStartY = 600;
    const listStyleChangeEndY = 2700;

    const listItems = document.querySelectorAll(".list-item");
    const division =
      (listStyleChangeEndY - listStyleChangeStartY) / listItems.length;

    const panel1Img = document.querySelector("#panel1-img");
    const flyingSantaImage = document.querySelector("#flying-santa-image");

    window.addEventListener("scroll", () => {
      if (document.getElementById("on")) {
        document.getElementById("on").removeAttribute("id");
      }

      if (
        window.scrollY > listStyleChangeStartY &&
        window.screenY < listStyleChangeEndY
      ) {
        const targetIndex = Math.round(
          (window.scrollY - listStyleChangeStartY) / division
        );

        if (listItems[targetIndex]) listItems[targetIndex].id = "on";
      }

      // 스크롤 하단부 높이 = 스크롤 높이 + 화면의 높이
      const scrollYBottom =
        window.scrollY + document.documentElement.clientHeight;

      // 스크롤 하단부의 높이가 이미지 패널의 상단을 넘어설 때
      if (
        scrollYBottom > panel1Img.offsetTop &&
        scrollYBottom < panel1Img.offsetTop + panel1Img.offsetHeight
      ) {
        const translateX =
          80 -
          (80 * (scrollYBottom - panel1Img.offsetTop)) / panel1Img.offsetHeight;

        const translateY =
          -13 +
          (13 * (scrollYBottom - panel1Img.offsetTop)) / panel1Img.offsetHeight;

        const rotationDegree =
          23 -
          (23 * 1.7 * (scrollYBottom - panel1Img.offsetTop)) /
            panel1Img.offsetHeight;

        flyingSantaImage.style.transform = `translate(${translateX}px, ${translateY}px) rotate(${rotationDegree}deg)`;
      }
    });

    // 이미지 슬라이더  ////
    let currentImage = 0;

    const sliderContentWrapper = document.getElementById(
      "slider-content-wrapper"
    );
    const sliderImages = document.querySelectorAll(".slider-image");
    const sliderIndex = document.getElementById("slider-index");

    const handleSliderChange = (step) => {
      currentImage += step;

      if (currentImage < 0) {
        currentImage = sliderImages.length - 1;
      } else if (currentImage >= sliderImages.length) {
        currentImage = 0;
      }

      sliderContentWrapper.scrollLeft = sliderImages[currentImage].offsetLeft;
      sliderIndex.innerText = `${currentImage + 1}/${sliderImages.length}`;
    };

    document.getElementById("left-button").addEventListener("click", () => {
      handleSliderChange(-1);
    });
    document.getElementById("right-button").addEventListener("click", () => {
      handleSliderChange(1);
    });

    sliderContentWrapper.addEventListener("scroll", () => {
      const imageWidth =
        document.querySelectorAll(".slider-image")[0].offsetWidth;

      currentImage = Math.floor(sliderContentWrapper.scrollLeft / imageWidth);

      sliderIndex.innerText = `${currentImage + 1}/${sliderImages.length}`;
    });
  </script>
</html>
